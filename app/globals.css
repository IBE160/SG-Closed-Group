@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 142 76% 36%; /* green-600 for primary actions */
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84% 60%; /* red-600 for errors/Pri 1 */
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;

    /* Emergency Services Semantic Colors */
    --success: 142 76% 36%; /* green-600 */
    --warning: 38 92% 50%; /* amber-500 */
    --info: 217 91% 60%; /* blue-500 */
  }

  .dark {
    /* Emergency Operations Dark Theme - Slate-based */
    --background: 222 47% 2%; /* slate-950 #020617 */
    --foreground: 210 40% 85%; /* slate-300 #CBD5E1 */
    --card: 222 47% 6%; /* slate-900 #0F172A */
    --card-foreground: 210 40% 85%; /* slate-300 */
    --popover: 222 47% 6%; /* slate-900 */
    --popover-foreground: 210 40% 85%; /* slate-300 */
    --primary: 142 76% 36%; /* green-600 for primary actions */
    --primary-foreground: 0 0% 100%;
    --secondary: 215 25% 15%; /* slate-800 #1E293B */
    --secondary-foreground: 210 40% 85%;
    --muted: 215 25% 15%; /* slate-800 */
    --muted-foreground: 215 20% 45%; /* slate-400 */
    --accent: 217 91% 60%; /* blue-500 for active states */
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%; /* red-600 for errors/Pri 1 */
    --destructive-foreground: 0 0% 100%;
    --border: 215 25% 20%; /* slate-700 #334155 */
    --input: 215 25% 20%; /* slate-700 */
    --ring: 217 91% 60%; /* blue-500 */

    /* Emergency Services Semantic Colors */
    --success: 142 76% 36%; /* green-600 - Vehicle available */
    --warning: 38 92% 50%; /* amber-500 - Flash messages, pending */
    --info: 217 91% 60%; /* blue-500 - Links, informational */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Emergency Services Theme - Professional, High Contrast */
@layer utilities {
  .emergency-container {
    @apply max-w-none mx-auto p-4;
  }

  /* Priority styling - adapts to light/dark mode */
  .priority-critical {
    @apply border-l-4 border-red-600 bg-red-50 dark:bg-red-600/20;
  }

  .priority-normal {
    @apply border-l-4 border-gray-300 bg-white dark:border-slate-700 dark:bg-slate-900;
  }

  /* Vehicle status colors */
  .status-green {
    @apply bg-green-600/20 border border-green-600 text-green-400;
  }

  .status-red {
    @apply bg-red-600/20 border border-red-600 text-red-400;
  }

  .status-grey {
    @apply bg-gray-600/20 border border-gray-600 text-gray-400;
  }

  /* Flash message blinking animations - Story 4.2 */
  /* INTENSE version - very noticeable for urgent messages */

  /* Quick blink: 3 rapid blinks when new message arrives - HIGH INTENSITY */
  @keyframes flash-quick {
    0%, 100% {
      background-color: hsl(var(--destructive) / 0.2);
      box-shadow: inset 0 0 0 2px hsl(var(--destructive) / 0.5);
    }
    50% {
      background-color: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
      box-shadow: inset 0 0 20px hsl(var(--destructive)), 0 0 10px hsl(var(--destructive) / 0.5);
    }
  }

  /* Continuous blink: pulsing after quick blinks - keeps attention */
  @keyframes flash-continuous {
    0%, 100% {
      background-color: hsl(var(--destructive));
      color: hsl(var(--destructive-foreground));
      border-color: hsl(var(--destructive));
      box-shadow: 0 0 15px hsl(var(--destructive) / 0.6);
    }
    50% {
      background-color: hsl(var(--destructive) / 0.3);
      color: hsl(var(--foreground));
      border-color: hsl(var(--destructive));
      box-shadow: 0 0 5px hsl(var(--destructive) / 0.3);
    }
  }

  /* 3 quick blinks (0.3s each = 0.9s total) - faster for urgency */
  .animate-flash-quick {
    animation: flash-quick 0.3s ease-in-out 3;
  }

  /* Continuous blink (1.5s cycle, infinite) - faster than before */
  .animate-flash-continuous {
    animation: flash-continuous 1.5s ease-in-out infinite;
  }

  /* Full-screen flash overlay - VERY attention grabbing */
  @keyframes flash-screen-overlay {
    0%, 100% {
      background-color: transparent;
    }
    50% {
      background-color: hsl(var(--destructive) / 0.5);
    }
  }

  /* Screen overlay (0.5s x 6 = 3s total) - faster and more blinks */
  .animate-flash-screen {
    animation: flash-screen-overlay 0.5s ease-in-out 6;
  }

  /* Legacy animations (kept for backwards compatibility) */
  @keyframes flash-blink {
    0%, 100% { background-color: hsl(var(--background)); }
    50% { background-color: hsl(38 92% 50% / 0.2); }
  }

  @keyframes message-pulse {
    0%, 100% { border-color: hsl(38 92% 50%); background-color: hsl(38 92% 50% / 0.1); }
    50% { border-color: transparent; background-color: transparent; }
  }

  .flash-screen-blink {
    animation: flash-blink 0.4s ease-in-out 3;
  }

  .flash-message-pulse {
    animation: message-pulse 0.5s ease-in-out infinite;
  }

  /* Focus visible states for accessibility */
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* Touch-friendly target sizes (44px min as per WCAG) */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  /* Typography scale for emergency services (larger base) */
  .text-emergency-base {
    @apply text-lg font-medium; /* 18px base */
  }

  .text-emergency-heading {
    @apply text-2xl font-semibold; /* 24px section headers */
  }
}
